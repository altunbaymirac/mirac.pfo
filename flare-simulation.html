<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLARE MESH SIMULATOR | MIRA√á ALTUNBAY</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="flare-simulation.css">
</head>
<body>
    <div class="overlay"></div>
    <div class="terminal flare-terminal">
        <header>
            <div class="system-meta">
                [SYSTEM: FLARE EMERGENCY MESH NETWORK] <br>
                [UNIT: AGU MECHANICAL ENGINEERING] <br>
                [STATUS: <span id="system-status">STANDBY</span>]
            </div>
            <div class="header-right">
                <div id="clock">00:00:00</div>
                <a href="index.html" class="back-btn">[‚Üê ANA SAYFA]</a>
            </div>
        </header>

        <!-- SCENARIO BAR -->
        <div class="scenario-bar">
            <div class="scenario-info">
                <span class="scenario-label">SENARYO:</span>
                <span id="scenario-name" class="scenario-name">NORMAL OPERASYON</span>
            </div>
            <div class="scenario-buttons">
                <button class="scenario-btn active" onclick="setScenario('normal')">
                    [üì∂ NORMAL]
                </button>
                <button class="scenario-btn danger" onclick="setScenario('earthquake')">
                    [üî¥ DEPREM - GSM √á√ñKT√ú]
                </button>
                <button class="scenario-btn" onclick="setScenario('flood')">
                    [üåä SEL]
                </button>
            </div>
            <div class="network-status">
                <span class="status-item">
                    <span class="status-dot" id="gsm-dot"></span>
                    GSM: <span id="gsm-status">ONLINE</span>
                </span>
                <span class="status-item">
                    <span class="status-dot active" id="mesh-dot"></span>
                    MESH: <span id="mesh-status">AKTIF</span>
                </span>
            </div>
        </div>

        <!-- MAIN GRID -->
        <main class="flare-grid">
            
            <!-- LEFT: CONTROLS -->
            <section class="panel controls-panel">
                <h3>> KONTROL PANELƒ∞</h3>
                
                <!-- LoRa Parameters -->
                <div class="param-section">
                    <h4>// LORA PARAMETRELERƒ∞</h4>
                    
                    <div class="control-group">
                        <label>SPREADING FACTOR (SF)</label>
                        <div class="btn-row">
                            <button class="param-btn" onclick="setParam('sf', 7)">7</button>
                            <button class="param-btn" onclick="setParam('sf', 9)">9</button>
                            <button class="param-btn active" onclick="setParam('sf', 10)">10</button>
                            <button class="param-btn" onclick="setParam('sf', 12)">12</button>
                        </div>
                        <span class="param-info">SF‚Üë = Menzil‚Üë, Hƒ±z‚Üì</span>
                    </div>

                    <div class="control-group">
                        <label>BANDWIDTH (kHz)</label>
                        <div class="btn-row">
                            <button class="param-btn" onclick="setParam('bw', 125)">125</button>
                            <button class="param-btn active" onclick="setParam('bw', 250)">250</button>
                            <button class="param-btn" onclick="setParam('bw', 500)">500</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>TX POWER (dBm)</label>
                        <div class="slider-container">
                            <input type="range" id="tx-power" min="2" max="20" value="14">
                            <span class="slider-value" id="tx-power-val">14 dBm</span>
                        </div>
                    </div>
                </div>

                <!-- Node Actions -->
                <div class="param-section">
                    <h4>// NODE ƒ∞≈ûLEMLERƒ∞</h4>
                    
                    <button class="action-btn" onclick="addNode()">
                        [+ NODE EKLE]
                    </button>
                    
                    <button class="action-btn danger" onclick="toggleNodeMode()">
                        <span id="node-mode-text">[üî¥ NODE KAPAT MODU]</span>
                    </button>
                    
                    <button class="action-btn" onclick="resetNetwork()">
                        [‚Ü∫ AƒûI SIFIRLA]
                    </button>
                </div>

                <!-- Quick Stats -->
                <div class="stats-section">
                    <h4>// Aƒû ƒ∞STATƒ∞STƒ∞KLERƒ∞</h4>
                    <div class="stat-row">
                        <span>AKTƒ∞F NODE:</span>
                        <span id="stat-nodes" class="stat-value">0/0</span>
                    </div>
                    <div class="stat-row">
                        <span>ORTALAMA HOP:</span>
                        <span id="stat-hops" class="stat-value">0.0</span>
                    </div>
                    <div class="stat-row">
                        <span>Aƒû KAPSAMI:</span>
                        <span id="stat-coverage" class="stat-value">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>MESAJ TESLƒ∞M:</span>
                        <span id="stat-delivery" class="stat-value">0%</span>
                    </div>
                </div>

                <!-- Info -->
                <div class="info-box">
                    <span class="info-label">// FLARE NEDƒ∞R?</span>
                    <p>Afet durumlarƒ±nda GSM altyapƒ±sƒ± √ß√∂kt√ºƒü√ºnde LoRa tabanlƒ± mesh aƒü ile haberle≈üme saƒülar.</p>
                    <p>Her node hem alƒ±cƒ± hem verici g√∂revi g√∂r√ºr.</p>
                </div>
            </section>

            <!-- CENTER: NETWORK MAP -->
            <section class="panel map-panel">
                <h3>> Aƒû TOPOLOJƒ∞Sƒ∞ <span id="map-mode-indicator"></span></h3>
                <div class="map-container">
                    <canvas id="network-canvas"></canvas>
                    <!-- Mesaj g√∂nderme overlay -->
                    <div id="message-overlay" class="message-overlay" style="display:none;">
                        <div class="message-popup">
                            <h4>[üì° MESAJ G√ñNDER]</h4>
                            <input type="text" id="msg-input" placeholder="ACƒ∞L MESAJINIZI YAZIN..." maxlength="100">
                            <div class="popup-buttons">
                                <button onclick="sendMessage()">[G√ñNDER]</button>
                                <button onclick="closeMessagePopup()">[ƒ∞PTAL]</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="map-legend">
                    <span class="legend-item"><span class="legend-dot node-active"></span> AKTƒ∞F NODE</span>
                    <span class="legend-item"><span class="legend-dot node-inactive"></span> DEVRE DI≈ûI</span>
                    <span class="legend-item"><span class="legend-dot node-survivor"></span> KURBAN/KULLANICI</span>
                    <span class="legend-item"><span class="legend-line"></span> BAƒûLANTI</span>
                </div>
                <div class="map-instructions">
                    // TIKLA: Node se√ß | √áƒ∞FT TIKLA: Mesaj g√∂nder | S√úR√úKLE: Ta≈üƒ±
                </div>
            </section>

            <!-- RIGHT: LOGS & METRICS -->
            <section class="panel logs-panel">
                <h3>> ƒ∞LETƒ∞≈ûƒ∞M LOGLARI</h3>
                
                <!-- Message propagation visualization -->
                <div class="propagation-display">
                    <div class="prop-header">
                        <span>SON MESAJ YAYILIMI</span>
                        <span id="prop-progress">0%</span>
                    </div>
                    <div class="prop-bar">
                        <div class="prop-fill" id="prop-fill"></div>
                    </div>
                    <div class="prop-stats">
                        <span>HOP: <span id="prop-hops">-</span></span>
                        <span>S√úRE: <span id="prop-time">-</span></span>
                        <span>ULA≈ûAN: <span id="prop-reached">-</span></span>
                    </div>
                </div>

                <!-- Log display -->
                <div id="log-display" class="log-display">
                    <div class="log-entry system">[SYSTEM] FLARE Mesh Simulator ba≈ülatƒ±ldƒ±...</div>
                    <div class="log-entry system">[SYSTEM] Node eklemek i√ßin sol paneli kullanƒ±n.</div>
                </div>

                <!-- Selected node info -->
                <div class="node-info-panel" id="node-info" style="display:none;">
                    <h4>> SE√áƒ∞Lƒ∞ NODE: <span id="selected-node-id">-</span></h4>
                    <div class="node-stats">
                        <div class="node-stat">
                            <span class="label">RSSI</span>
                            <span class="value" id="node-rssi">-</span>
                        </div>
                        <div class="node-stat">
                            <span class="label">SNR</span>
                            <span class="value" id="node-snr">-</span>
                        </div>
                        <div class="node-stat">
                            <span class="label">BAƒûLANTI</span>
                            <span class="value" id="node-connections">-</span>
                        </div>
                        <div class="node-stat">
                            <span class="label">MESAJ</span>
                            <span class="value" id="node-messages">-</span>
                        </div>
                    </div>
                    <div class="node-actions">
                        <button onclick="sendFromSelected()">[üì° MESAJ G√ñNDER]</button>
                        <button onclick="toggleSelectedNode()">[üî¥ DEVRE DI≈ûI]</button>
                    </div>
                </div>

                <!-- RSSI Scale -->
                <div class="rssi-scale">
                    <h4>// Sƒ∞NYAL KALƒ∞TESƒ∞ (RSSI)</h4>
                    <div class="scale-bar">
                        <div class="scale-section excellent">-50</div>
                        <div class="scale-section good">-70</div>
                        <div class="scale-section fair">-90</div>
                        <div class="scale-section weak">-110</div>
                        <div class="scale-section none">-130</div>
                    </div>
                    <div class="scale-labels">
                        <span>M√úKEMMEl</span>
                        <span>ZAYIF</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- FOOTER -->
        <footer class="flare-footer">
            <span>[AG√ú MAKƒ∞NE M√úHENDƒ∞SLƒ∞ƒûƒ∞]</span>
            <span>[FLARE EMERGENCY MESH NETWORK]</span>
            <span>[v1.0 TACTICAL SIMULATOR]</span>
        </footer>
    </div>

    <script src="flare-simulation.js"></script>
</body>
</html>
